<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | SocialChat Online</title>
<!-- We use a modern sans-serif font stack -->
<style>
:root {
--primary-blue: #0095f6;
--bg-gray: #fafafa;
--border-color: #dbdbdb;
--text-dark: #262626;
--text-gray: #8e8e8e;
}

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--bg-gray);
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        color: var(--text-dark);
    }

    .auth-container {
        width: 100%;
        max-width: 350px;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .auth-box {
        background: white;
        border: 1px solid var(--border-color);
        padding: 20px 40px;
        text-align: center;
        border-radius: 1px;
    }

    .logo {
        font-size: 2.5rem;
        font-weight: bold;
        margin: 20px 0;
        letter-spacing: -1px;
        background: -webkit-linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .auth-form {
        display: flex;
        flex-direction: column;
        gap: 6px;
    }

    input {
        background: #fafafa;
        border: 1px solid var(--border-color);
        border-radius: 3px;
        padding: 9px 7px;
        font-size: 12px;
        outline: none;
    }

    input:focus {
        border-color: #a8a8a8;
    }

    button {
        background-color: var(--primary-blue);
        color: white;
        border: none;
        border-radius: 4px;
        padding: 7px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 8px;
        font-size: 14px;
    }

    button:disabled {
        opacity: 0.5;
        cursor: default;
    }

    .divider {
        display: flex;
        align-items: center;
        margin: 20px 0;
        color: var(--text-gray);
        font-size: 13px;
        font-weight: 600;
    }

    .divider::before, .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--border-color);
    }

    .divider span {
        padding: 0 18px;
    }

    .switch-box {
        background: white;
        border: 1px solid var(--border-color);
        padding: 20px;
        text-align: center;
        font-size: 14px;
    }

    .switch-link {
        color: var(--primary-blue);
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
    }

    .error-msg {
        color: #ed4956;
        font-size: 12px;
        margin-top: 15px;
        display: none;
    }
</style>


</head>
<body>

<div class="auth-container">
    <!-- Login/Signup Box -->
    <div class="auth-box" id="auth-box">
        <div class="logo">SocialChat</div>
        
        <form class="auth-form" id="login-form" onsubmit="handleAuth(event, 'login')">
            <input type="text" id="username" placeholder="Phone number, username, or email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit" id="submit-btn">Log In</button>
        </form>

        <div class="divider">
            <span>OR</span>
        </div>

        <div style="color: #385185; font-size: 14px; font-weight: 600; cursor: pointer;">
            Log in with Facebook
        </div>

        <div id="error-message" class="error-msg">Invalid credentials. Please try again.</div>
    </div>

    <!-- Switcher Box -->
    <div class="switch-box">
        <span id="switch-text">Don't have an account?</span>
        <span class="switch-link" id="switch-btn" onclick="toggleMode()">Sign up</span>
    </div>
</div>

<script>
    let isLogin = true;

    function toggleMode() {
        const title = document.querySelector('title');
        const submitBtn = document.getElementById('submit-btn');
        const switchText = document.getElementById('switch-text');
        const switchBtn = document.getElementById('switch-btn');
        const usernameInput = document.getElementById('username');
        
        isLogin = !isLogin;

        if (isLogin) {
            title.innerText = "Login | SocialChat Online";
            submitBtn.innerText = "Log In";
            switchText.innerText = "Don't have an account?";
            switchBtn.innerText = "Sign up";
            usernameInput.placeholder = "Phone number, username, or email";
        } else {
            title.innerText = "Sign Up | SocialChat Online";
            submitBtn.innerText = "Sign Up";
            switchText.innerText = "Have an account?";
            switchBtn.innerText = "Log in";
            usernameInput.placeholder = "Username";
        }
        document.getElementById('error-message').style.display = 'none';
    }

    function handleAuth(event, type) {
        event.preventDefault();
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;

        if (user.length < 3 || pass.length < 4) {
            const error = document.getElementById('error-message');
            error.innerText = "Credentials too short.";
            error.style.display = 'block';
            return;
        }

        // Persist user locally for the session
        localStorage.setItem('socialchat_user', user);
        localStorage.setItem('socialchat_avatar', `https://api.dicebear.com/7.x/avataaars/svg?seed=${user}`);
        
        // Redirect to the main site
        window.location.href = '/site';
    }

    // Auto-fill check (optional)
    window.onload = () => {
        if(localStorage.getItem('socialchat_user')) {
            // If already logged in, we could redirect, but usually, we let them see the login
        }
    }
</script>


</body>
</html>
